THREE.MTLLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(t,a,r,e){var s=this,i=void 0===this.path?THREE.LoaderUtils.extractUrlBase(t):this.path,o=new THREE.FileLoader(this.manager);o.setPath(this.path),o.load(t,function(t){a(s.parse(t,i))},r,e)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setTexturePath:function(t){return console.warn("THREE.MTLLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)},setCrossOrigin:function(t){return this.crossOrigin=t,this},setMaterialOptions:function(t){return this.materialOptions=t,this},parse:function(t,a){for(var r=t.split("\n"),e={},s=/\s+/,i={},o=0;o<r.length;o++){var n=r[o];if(0!==(n=n.trim()).length&&"#"!==n.charAt(0)){var h=n.indexOf(" "),p=0<=h?n.substring(0,h):n;p=p.toLowerCase();var l=0<=h?n.substring(h+1):"";if(l=l.trim(),"newmtl"===p)e={name:l},i[l]=e;else if("ka"===p||"kd"===p||"ks"===p){var c=l.split(s,3);e[p]=[parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2])]}else e[p]=l}}var u=new THREE.MTLLoader.MaterialCreator(this.resourcePath||a,this.materialOptions);return u.setCrossOrigin(this.crossOrigin),u.setManager(this.manager),u.setMaterials(i),u}},THREE.MTLLoader.MaterialCreator=function(t,a){this.baseUrl=t||"",this.options=a,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(t){return this.crossOrigin=t,this},setManager:function(t){this.manager=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var a={};for(var r in t){var e=t[r],s={};for(var i in a[r]=s,e){var o=!0,n=e[i],h=i.toLowerCase();switch(h){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(n=[n[0]/255,n[1]/255,n[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===n[0]&&0===n[1]&&0===n[2]&&(o=!1)}o&&(s[h]=n)}}return a},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var a in this.materialsInfo)this.materialsArray[t]=this.create(a),this.nameLookup[a]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){var o=this,a=this.materialsInfo[t],n={name:t,side:this.side};function r(t,a){if(!n[t]){var r,e,s=o.getTextureParams(a,n),i=o.loadTexture((r=o.baseUrl,"string"!=typeof(e=s.url)||""===e?"":/^https?:\/\//i.test(e)?e:r+e));i.repeat.copy(s.scale),i.offset.copy(s.offset),i.wrapS=o.wrap,i.wrapT=o.wrap,n[t]=i}}for(var e in a){var s,i=a[e];if(""!==i)switch(e.toLowerCase()){case"kd":n.color=(new THREE.Color).fromArray(i);break;case"ks":n.specular=(new THREE.Color).fromArray(i);break;case"map_kd":r("map",i);break;case"map_ks":r("specularMap",i);break;case"norm":r("normalMap",i);break;case"map_bump":case"bump":r("bumpMap",i);break;case"map_d":r("alphaMap",i),n.transparent=!0;break;case"ns":n.shininess=parseFloat(i);break;case"d":(s=parseFloat(i))<1&&(n.opacity=s,n.transparent=!0);break;case"tr":s=parseFloat(i),this.options&&this.options.invertTrProperty&&(s=1-s),0<s&&(n.opacity=1-s,n.transparent=!0)}}return this.materials[t]=new THREE.MeshPhongMaterial(n),this.materials[t]},getTextureParams:function(t,a){var r,e={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},s=t.split(/\s+/);return 0<=(r=s.indexOf("-bm"))&&(a.bumpScale=parseFloat(s[r+1]),s.splice(r,2)),0<=(r=s.indexOf("-s"))&&(e.scale.set(parseFloat(s[r+1]),parseFloat(s[r+2])),s.splice(r,4)),0<=(r=s.indexOf("-o"))&&(e.offset.set(parseFloat(s[r+1]),parseFloat(s[r+2])),s.splice(r,4)),e.url=s.join(" ").trim(),e},loadTexture:function(t,a,r,e,s){var i,o=THREE.Loader.Handlers.get(t),n=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null===o&&(o=new THREE.TextureLoader(n)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin),i=o.load(t,r,e,s),void 0!==a&&(i.mapping=a),i}};
THREE.OBJLoader=function(){var J=/^[og]\s*(.+)?/,k=/^mtllib /,q=/^usemtl /;function K(){var t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(t,e){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var i={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&0<e.length?e[e.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){var e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(i),i},currentMaterial:function(){if(0<this.materials.length)return this.materials[this.materials.length-1]},_finalize:function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&1<this.materials.length)for(var r=this.materials.length-1;0<=r;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},r&&r.name&&"function"==typeof r.clone){var i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){var r=parseInt(t,10);return 3*(0<=r?r-1:r+e/3)},parseNormalIndex:function(t,e){var r=parseInt(t,10);return 3*(0<=r?r-1:r+e/3)},parseUVIndex:function(t,e){var r=parseInt(t,10);return 2*(0<=r?r-1:r+e/2)},addVertex:function(t,e,r){var i=this.vertices,s=this.object.geometry.vertices;s.push(i[t+0],i[t+1],i[t+2]),s.push(i[e+0],i[e+1],i[e+2]),s.push(i[r+0],i[r+1],i[r+2])},addVertexPoint:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,r){var i=this.normals,s=this.object.geometry.normals;s.push(i[t+0],i[t+1],i[t+2]),s.push(i[e+0],i[e+1],i[e+2]),s.push(i[r+0],i[r+1],i[r+2])},addColor:function(t,e,r){var i=this.colors,s=this.object.geometry.colors;s.push(i[t+0],i[t+1],i[t+2]),s.push(i[e+0],i[e+1],i[e+2]),s.push(i[r+0],i[r+1],i[r+2])},addUV:function(t,e,r){var i=this.uvs,s=this.object.geometry.uvs;s.push(i[t+0],i[t+1]),s.push(i[e+0],i[e+1]),s.push(i[r+0],i[r+1])},addUVLine:function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,r,i,s,a,n,o,h){var l=this.vertices.length,u=this.parseVertexIndex(t,l),c=this.parseVertexIndex(e,l),p=this.parseVertexIndex(r,l);if(this.addVertex(u,c,p),void 0!==i&&""!==i){var m=this.uvs.length;u=this.parseUVIndex(i,m),c=this.parseUVIndex(s,m),p=this.parseUVIndex(a,m),this.addUV(u,c,p)}if(void 0!==n&&""!==n){var f=this.normals.length;u=this.parseNormalIndex(n,f),c=n===o?u:this.parseNormalIndex(o,f),p=n===h?u:this.parseNormalIndex(h,f),this.addNormal(u,c,p)}0<this.colors.length&&this.addColor(u,c,p)},addPointGeometry:function(t){this.object.geometry.type="Points";for(var e=this.vertices.length,r=0,i=t.length;r<i;r++)this.addVertexPoint(this.parseVertexIndex(t[r],e))},addLineGeometry:function(t,e){this.object.geometry.type="Line";for(var r=this.vertices.length,i=this.uvs.length,s=0,a=t.length;s<a;s++)this.addVertexLine(this.parseVertexIndex(t[s],r));var n=0;for(a=e.length;n<a;n++)this.addUVLine(this.parseUVIndex(e[n],i))}};return t.startObject("",!1),t}function t(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager,this.materials=null}return t.prototype={constructor:t,load:function(t,e,r,i){var s=this,a=new THREE.FileLoader(s.manager);a.setPath(this.path),a.load(t,function(t){e(s.parse(t))},r,i)},setPath:function(t){return this.path=t,this},setMaterials:function(t){return this.materials=t,this},parse:function(t){console.time("OBJLoader");var e=new K;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var r=t.split("\n"),i="",s="",a=[],n="function"==typeof"".trimLeft,o=0,h=r.length;o<h;o++)if(i=r[o],0!==(i=n?i.trimLeft():i.trim()).length&&"#"!==(s=i.charAt(0)))if("v"===s){var l=i.split(/\s+/);switch(l[0]){case"v":e.vertices.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])),8===l.length&&e.colors.push(parseFloat(l[4]),parseFloat(l[5]),parseFloat(l[6]));break;case"vn":e.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));break;case"vt":e.uvs.push(parseFloat(l[1]),parseFloat(l[2]))}}else if("f"===s){for(var u=i.substr(1).trim().split(/\s+/),c=[],p=0,m=u.length;p<m;p++){var f=u[p];if(0<f.length){var d=f.split("/");c.push(d)}}var v=c[0];for(p=1,m=c.length-1;p<m;p++){var g=c[p],b=c[p+1];e.addFace(v[0],g[0],b[0],v[1],g[1],b[1],v[2],g[2],b[2])}}else if("l"===s){var E=i.substring(1).trim().split(" "),x=[],j=[];if(-1===i.indexOf("/"))x=E;else for(var y=0,L=E.length;y<L;y++){var H=E[y].split("/");""!==H[0]&&x.push(H[0]),""!==H[1]&&j.push(H[1])}e.addLineGeometry(x,j)}else if("p"===s){var R=i.substr(1).trim().split(" ");e.addPointGeometry(R)}else if(null!==(a=J.exec(i))){var T=(" "+a[0].substr(1).trim()).substr(1);e.startObject(T)}else if(q.test(i))e.object.startMaterial(i.substring(7).trim(),e.materialLibraries);else if(k.test(i))e.materialLibraries.push(i.substring(7).trim());else{if("s"!==s){if("\0"===i)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+i+'"')}if(1<(a=i.split(" ")).length){var w=a[1].trim().toLowerCase();e.object.smooth="0"!==w&&"off"!==w}else e.object.smooth=!0;(S=e.object.currentMaterial())&&(S.smooth=e.object.smooth)}e.finalize();var V=new THREE.Group;V.materialLibraries=[].concat(e.materialLibraries);for(o=0,h=e.objects.length;o<h;o++){var M=e.objects[o],F=M.geometry,I=M.materials,P="Line"===F.type,A="Points"===F.type,z=!1;if(0!==F.vertices.length){var B=new THREE.BufferGeometry;B.addAttribute("position",new THREE.Float32BufferAttribute(F.vertices,3)),0<F.normals.length?B.addAttribute("normal",new THREE.Float32BufferAttribute(F.normals,3)):B.computeVertexNormals(),0<F.colors.length&&(z=!0,B.addAttribute("color",new THREE.Float32BufferAttribute(F.colors,3))),0<F.uvs.length&&B.addAttribute("uv",new THREE.Float32BufferAttribute(F.uvs,2));for(var C,O=[],U=0,N=I.length;U<N;U++){var G=I[U],S=void 0;if(null!==this.materials)if(S=this.materials.create(G.name),!P||!S||S instanceof THREE.LineBasicMaterial){if(A&&S&&!(S instanceof THREE.PointsMaterial)){var _=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});D.copy(S),S=_}}else{var D=new THREE.LineBasicMaterial;D.copy(S),D.lights=!1,S=D}S||((S=P?new THREE.LineBasicMaterial:A?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial).name=G.name),S.flatShading=!G.smooth,S.vertexColors=z?THREE.VertexColors:THREE.NoColors,O.push(S)}if(1<O.length){for(U=0,N=I.length;U<N;U++){G=I[U];B.addGroup(G.groupStart,G.groupCount,U)}C=P?new THREE.LineSegments(B,O):A?new THREE.Points(B,O):new THREE.Mesh(B,O)}else C=P?new THREE.LineSegments(B,O[0]):A?new THREE.Points(B,O[0]):new THREE.Mesh(B,O[0]);C.name=M.name,V.add(C)}}return console.timeEnd("OBJLoader"),V}},t}();
THREE.OrbitControls=function(e,t){var n,o,a,i,r;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(c),s.update(),d=u.NONE},this.update=(n=new THREE.Vector3,o=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),a=o.clone().inverse(),i=new THREE.Vector3,r=new THREE.Quaternion,function(){var e=s.object.position;return n.copy(e).sub(s.target),n.applyQuaternion(o),h.setFromVector3(n),s.autoRotate&&d===u.NONE&&M(2*Math.PI/60/60*s.autoRotateSpeed),h.theta+=E.theta,h.phi+=E.phi,h.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,h.theta)),h.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=b,h.radius=Math.max(s.minDistance,Math.min(s.maxDistance,h.radius)),s.target.add(g),n.setFromSpherical(h),n.applyQuaternion(a),e.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(E.theta*=1-s.dampingFactor,E.phi*=1-s.dampingFactor,g.multiplyScalar(1-s.dampingFactor)):(E.set(0,0,0),g.set(0,0,0)),b=1,!(!(f||i.distanceToSquared(s.object.position)>p||8*(1-r.dot(s.object.quaternion))>p)||(s.dispatchEvent(c),i.copy(s.object.position),r.copy(s.object.quaternion),f=!1))}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",B,!1),s.domElement.removeEventListener("mousedown",Z,!1),s.domElement.removeEventListener("wheel",I,!1),s.domElement.removeEventListener("touchstart",K,!1),s.domElement.removeEventListener("touchend",G,!1),s.domElement.removeEventListener("touchmove",_,!1),document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",F,!1),window.removeEventListener("keydown",X,!1)};var s=this,c={type:"change"},l={type:"start"},m={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},d=u.NONE,p=1e-6,h=new THREE.Spherical,E=new THREE.Spherical,b=1,g=new THREE.Vector3,f=!1,v=new THREE.Vector2,T=new THREE.Vector2,y=new THREE.Vector2,R=new THREE.Vector2,O=new THREE.Vector2,H=new THREE.Vector2,w=new THREE.Vector2,P=new THREE.Vector2,j=new THREE.Vector2;function L(){return Math.pow(.95,s.zoomSpeed)}function M(e){E.theta-=e}function C(e){E.phi-=e}var N,S,A,D=(N=new THREE.Vector3,function(e,t){N.setFromMatrixColumn(t,0),N.multiplyScalar(-e),g.add(N)}),x=(S=new THREE.Vector3,function(e,t){!0===s.screenSpacePanning?S.setFromMatrixColumn(t,1):(S.setFromMatrixColumn(t,0),S.crossVectors(s.object.up,S)),S.multiplyScalar(e),g.add(S)}),k=(A=new THREE.Vector3,function(e,t){var n=s.domElement===document?s.domElement.body:s.domElement;if(s.object.isPerspectiveCamera){var o=s.object.position;A.copy(o).sub(s.target);var a=A.length();a*=Math.tan(s.object.fov/2*Math.PI/180),D(2*e*a/n.clientHeight,s.object.matrix),x(2*t*a/n.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(D(e*(s.object.right-s.object.left)/s.object.zoom/n.clientWidth,s.object.matrix),x(t*(s.object.top-s.object.bottom)/s.object.zoom/n.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)});function V(e){s.object.isPerspectiveCamera?b/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function U(e){s.object.isPerspectiveCamera?b*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function Y(e){R.set(e.clientX,e.clientY)}function Z(e){if(!1!==s.enabled){switch(e.preventDefault(),e.button){case s.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey){if(!1===s.enablePan)return;Y(e),d=u.PAN}else{if(!1===s.enableRotate)return;n=e,v.set(n.clientX,n.clientY),d=u.ROTATE}break;case s.mouseButtons.MIDDLE:if(!1===s.enableZoom)return;t=e,w.set(t.clientX,t.clientY),d=u.DOLLY;break;case s.mouseButtons.RIGHT:if(!1===s.enablePan)return;Y(e),d=u.PAN}var t,n;d!==u.NONE&&(document.addEventListener("mousemove",z,!1),document.addEventListener("mouseup",F,!1),s.dispatchEvent(l))}}function z(e){var t,n;if(!1!==s.enabled)switch(e.preventDefault(),d){case u.ROTATE:if(!1===s.enableRotate)return;!function(e){T.set(e.clientX,e.clientY),y.subVectors(T,v).multiplyScalar(s.rotateSpeed);var t=s.domElement===document?s.domElement.body:s.domElement;M(2*Math.PI*y.x/t.clientHeight),C(2*Math.PI*y.y/t.clientHeight),v.copy(T),s.update()}(e);break;case u.DOLLY:if(!1===s.enableZoom)return;n=e,P.set(n.clientX,n.clientY),j.subVectors(P,w),0<j.y?V(L()):j.y<0&&U(L()),w.copy(P),s.update();break;case u.PAN:if(!1===s.enablePan)return;t=e,O.set(t.clientX,t.clientY),H.subVectors(O,R).multiplyScalar(s.panSpeed),k(H.x,H.y),R.copy(O),s.update()}}function F(e){!1!==s.enabled&&(document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",F,!1),s.dispatchEvent(m),d=u.NONE)}function I(e){var t;!1===s.enabled||!1===s.enableZoom||d!==u.NONE&&d!==u.ROTATE||(e.preventDefault(),e.stopPropagation(),s.dispatchEvent(l),(t=e).deltaY<0?U(L()):0<t.deltaY&&V(L()),s.update(),s.dispatchEvent(m))}function X(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){switch(e.keyCode){case s.keys.UP:k(0,s.keyPanSpeed),s.update();break;case s.keys.BOTTOM:k(0,-s.keyPanSpeed),s.update();break;case s.keys.LEFT:k(s.keyPanSpeed,0),s.update();break;case s.keys.RIGHT:k(-s.keyPanSpeed,0),s.update()}}(e)}function K(e){if(!1!==s.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===s.enableRotate)return;t=e,v.set(t.touches[0].pageX,t.touches[0].pageY),d=u.TOUCH_ROTATE;break;case 2:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){if(s.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);w.set(0,o)}if(s.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);R.set(a,i)}}(e),d=u.TOUCH_DOLLY_PAN;break;default:d=u.NONE}var t;d!==u.NONE&&s.dispatchEvent(l)}}function _(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===s.enableRotate)return;if(d!==u.TOUCH_ROTATE)return;!function(e){T.set(e.touches[0].pageX,e.touches[0].pageY),y.subVectors(T,v).multiplyScalar(s.rotateSpeed);var t=s.domElement===document?s.domElement.body:s.domElement;M(2*Math.PI*y.x/t.clientHeight),C(2*Math.PI*y.y/t.clientHeight),v.copy(T),s.update()}(e);break;case 2:if(!1===s.enableZoom&&!1===s.enablePan)return;if(d!==u.TOUCH_DOLLY_PAN)return;!function(e){if(s.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);P.set(0,o),j.set(0,Math.pow(P.y/w.y,s.zoomSpeed)),V(j.y),w.copy(P)}if(s.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);O.set(a,i),H.subVectors(O,R).multiplyScalar(s.panSpeed),k(H.x,H.y),R.copy(O)}s.update()}(e);break;default:d=u.NONE}}function G(e){!1!==s.enabled&&(s.dispatchEvent(m),d=u.NONE)}function B(e){!1!==s.enabled&&e.preventDefault()}s.domElement.addEventListener("contextmenu",B,!1),s.domElement.addEventListener("mousedown",Z,!1),s.domElement.addEventListener("wheel",I,!1),s.domElement.addEventListener("touchstart",K,!1),s.domElement.addEventListener("touchend",G,!1),s.domElement.addEventListener("touchmove",_,!1),window.addEventListener("keydown",X,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});